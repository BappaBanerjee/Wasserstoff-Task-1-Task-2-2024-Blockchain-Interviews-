{
  "address": "0x4C37157Dc252dAcF1c88941138362F573E338F87",
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "NOT_AUTHORIZED",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address payable",
          "name": "proxy",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "admin",
          "type": "address"
        }
      ],
      "name": "changeProxyAdmin",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address payable",
          "name": "proxy",
          "type": "address"
        },
        {
          "internalType": "bytes4",
          "name": "functionId",
          "type": "bytes4"
        }
      ],
      "name": "deleteImplementation",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "proxy",
          "type": "address"
        }
      ],
      "name": "getProxyAdmin",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "proxy",
          "type": "address"
        },
        {
          "internalType": "bytes4",
          "name": "functionId",
          "type": "bytes4"
        }
      ],
      "name": "getProxyImplementation",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address payable",
          "name": "proxy",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "implementation",
          "type": "address"
        },
        {
          "internalType": "bytes4",
          "name": "functionId",
          "type": "bytes4"
        }
      ],
      "name": "upgradeImplementation",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x8275b7bbf4fd4b4180ba1a552448ddeb21d34aa5e1a1877126fb97eefdc36d3e",
  "receipt": {
    "to": null,
    "from": "0x26cEcCDC5DD2611D3d750903c901408416A73995",
    "contractAddress": "0x4C37157Dc252dAcF1c88941138362F573E338F87",
    "transactionIndex": 46,
    "gasUsed": "531442",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xe8d12ce0dc36753d1e114e717c64635a0e33e5e166fd9869897d9fb7d796d686",
    "transactionHash": "0x8275b7bbf4fd4b4180ba1a552448ddeb21d34aa5e1a1877126fb97eefdc36d3e",
    "logs": [],
    "blockNumber": 5349271,
    "cumulativeGasUsed": "4688929",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "c0157dfaa03f2a12566eede41fcddf10",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"NOT_AUTHORIZED\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"proxy\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"admin\",\"type\":\"address\"}],\"name\":\"changeProxyAdmin\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"proxy\",\"type\":\"address\"},{\"internalType\":\"bytes4\",\"name\":\"functionId\",\"type\":\"bytes4\"}],\"name\":\"deleteImplementation\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"proxy\",\"type\":\"address\"}],\"name\":\"getProxyAdmin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"proxy\",\"type\":\"address\"},{\"internalType\":\"bytes4\",\"name\":\"functionId\",\"type\":\"bytes4\"}],\"name\":\"getProxyImplementation\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"proxy\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"implementation\",\"type\":\"address\"},{\"internalType\":\"bytes4\",\"name\":\"functionId\",\"type\":\"bytes4\"}],\"name\":\"upgradeImplementation\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/ProxyAdmin.sol\":\"ProxyAdmin\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":666666},\"remappings\":[]},\"sources\":{\"contracts/Proxy.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity 0.8.20;\\nimport \\\"./StorageSlot.sol\\\";\\n\\ncontract Proxy{\\n\\n    error Implementation_NotFound();\\n    error Invalid_Contract_Address();\\n\\n    bytes32 private constant ADMIN_SLOT = bytes32(uint256(\\n            keccak256(\\\"eip1967.proxy.admin\\\")) - 1\\n        );\\n\\n    bytes32 private constant IMPLEMENTATION_SLOT = bytes32(uint256(\\n            keccak256(\\\"eip1967.proxy.implementation\\\")) - 1\\n        );\\n\\n    modifier isAdmin() {\\n        if(msg.sender == _getAdmin()){\\n            _;\\n        }else{\\n            _fallback();\\n        }\\n    }\\n\\n    constructor() {\\n        _setAdmin(msg.sender);\\n    }\\n\\n    function _setAdmin(address _addr) private {\\n        StorageSlot.getAddressSlot(ADMIN_SLOT).value[bytes4(keccak256(\\\"admin\\\"))] = _addr;\\n    }\\n\\n    function _getAdmin() private view returns(address) {\\n        return StorageSlot.getAddressSlot(ADMIN_SLOT).value[bytes4(keccak256(\\\"admin\\\"))];\\n    }\\n\\n    function _setImplementation(bytes4 _functionId, address _implementation) private {\\n        if(_implementation == address(0)) revert Invalid_Contract_Address();\\n        StorageSlot.getAddressSlot(IMPLEMENTATION_SLOT).value[_functionId] = _implementation;\\n    }\\n\\n    function _getImplementation(bytes4 _functionId) private view returns (address) {\\n        return StorageSlot.getAddressSlot(IMPLEMENTATION_SLOT).value[_functionId];\\n    }\\n\\n    //admin interface\\n\\n    function upgradeTo(bytes4 _functionId, address _implementation) external isAdmin   {\\n        _setImplementation(_functionId, _implementation);\\n    }\\n\\n    function changeAdmin(address _admin) public isAdmin {\\n        _setAdmin(_admin);\\n    }\\n\\n    function admin() external isAdmin returns (address) {\\n        return _getAdmin();\\n    }\\n\\n    function implementation(bytes4 _functionId) external isAdmin returns (address) {\\n        return _getImplementation(_functionId);\\n    }\\n\\n    function deleteImplementation(bytes4 _functionId) public isAdmin{\\n        delete StorageSlot.getAddressSlot(IMPLEMENTATION_SLOT).value[_functionId];\\n    }\\n\\n    //user Interface\\n    fallback() external payable { \\n        _fallback();\\n    }\\n\\n    receive() external payable { \\n        _fallback();\\n    }\\n\\n    function _fallback() private  {\\n        bytes4 functionId = _getFunctionId(msg.data);\\n        address _implementation = _getImplementation(functionId);\\n        if(_implementation == address(0)) revert Implementation_NotFound();\\n        _delegate(_implementation);\\n    }\\n\\n    function _getFunctionId(bytes memory data) private pure returns (bytes4) {\\n        bytes4 functionId;\\n        assembly {\\n            functionId := mload(add(data, 32))\\n        }\\n        return functionId;\\n    }\\n\\n    function _delegate(address _implementation) internal virtual {\\n        assembly {\\n            \\n            calldatacopy(0, 0, calldatasize())\\n\\n            let result := delegatecall(gas(), _implementation, 0, calldatasize(), 0, 0)\\n            returndatacopy(0, 0, returndatasize())\\n\\n            switch result\\n            // delegatecall returns 0 on error.\\n            case 0 {\\n                revert(0, returndatasize())\\n            }\\n            default {\\n                return(0, returndatasize())\\n            }\\n        }\\n    }\\n}\",\"keccak256\":\"0xa20105c756de3844484f62ea59cbaf59ed4281e7fb97efbbf6b4a047be652a42\",\"license\":\"MIT\"},\"contracts/ProxyAdmin.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity 0.8;\\n\\nimport \\\"./Proxy.sol\\\";\\n\\ncontract ProxyAdmin {\\n    error NOT_AUTHORIZED();\\n\\n    address public owner;\\n\\n    constructor() {\\n        owner = msg.sender;\\n    }\\n\\n    modifier onlyOwner() {\\n        if(msg.sender != owner) revert NOT_AUTHORIZED();\\n        _;\\n    }\\n\\n    function getProxyAdmin(address proxy) external view returns (address) {\\n        (bool ok, bytes memory res) = proxy.staticcall(abi.encodeCall(Proxy.admin, ()));\\n        require(ok, \\\"call failed\\\");\\n        return abi.decode(res, (address));\\n    }\\n\\n    function changeProxyAdmin(address payable proxy, address admin) external onlyOwner {\\n        Proxy(proxy).changeAdmin(admin);\\n    }\\n\\n    function getProxyImplementation(address proxy, bytes4 functionId) external view returns (address) {\\n       (bool ok, bytes memory res) = proxy.staticcall(\\n            abi.encodeCall(Proxy.implementation, (functionId))\\n        );\\n        require(ok, \\\"call failed\\\");\\n        return abi.decode(res, (address));\\n    }\\n\\n    function upgradeImplementation(address payable proxy, address implementation, bytes4 functionId) external onlyOwner {\\n        Proxy(proxy).upgradeTo(functionId, implementation);\\n    }\\n\\n    function deleteImplementation(address payable proxy, bytes4 functionId) external onlyOwner {\\n        Proxy(proxy).deleteImplementation(functionId);\\n    }\\n}\",\"keccak256\":\"0xcbc0bf19d3050d051daddf8c40a7f35e482e8c79c66d9ed3b1dd602521fbd998\",\"license\":\"MIT\"},\"contracts/StorageSlot.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity 0.8.20;\\n\\nlibrary StorageSlot {\\n    struct AddressSlot {\\n        mapping(bytes4 => address) value;\\n    }\\n\\n    function getAddressSlot(\\n        bytes32 slot\\n    ) internal pure returns (AddressSlot storage r) {\\n        assembly {\\n            r.slot := slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x76b5d66f8fae69afa57dfcd09899949259166405fc43cc9d5b51c3db60e2bafd\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b50600080546001600160a01b03191633179055610856806100326000396000f3fe608060405234801561001057600080fd5b50600436106100725760003560e01c80637eff275e116100505780637eff275e146100db5780638da5cb5b146100ee578063f3b7dead1461010e57600080fd5b80633fe0cd72146100775780635d6747cd1461008c5780635ea90176146100c8575b600080fd5b61008a6100853660046106fb565b610121565b005b61009f61009a3660046106fb565b610218565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b61008a6100d6366004610730565b6103b4565b61008a6100e9366004610777565b6104b3565b60005461009f9073ffffffffffffffffffffffffffffffffffffffff1681565b61009f61011c3660046107b0565b610558565b60005473ffffffffffffffffffffffffffffffffffffffff163314610172576040517f3d83866f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6040517fd6c680690000000000000000000000000000000000000000000000000000000081527fffffffff000000000000000000000000000000000000000000000000000000008216600482015273ffffffffffffffffffffffffffffffffffffffff83169063d6c68069906024015b600060405180830381600087803b1580156101fc57600080fd5b505af1158015610210573d6000803e3d6000fd5b505050505050565b6040517fffffffff00000000000000000000000000000000000000000000000000000000821660248201526000908190819073ffffffffffffffffffffffffffffffffffffffff861690604401604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529181526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167f0d74157700000000000000000000000000000000000000000000000000000000179052516102e691906107d4565b600060405180830381855afa9150503d8060008114610321576040519150601f19603f3d011682016040523d82523d6000602084013e610326565b606091505b509150915081610397576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600b60248201527f63616c6c206661696c656400000000000000000000000000000000000000000060448201526064015b60405180910390fd5b808060200190518101906103ab9190610803565b95945050505050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610405576040517f3d83866f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6040517f720850310000000000000000000000000000000000000000000000000000000081527fffffffff000000000000000000000000000000000000000000000000000000008216600482015273ffffffffffffffffffffffffffffffffffffffff8381166024830152841690637208503190604401600060405180830381600087803b15801561049657600080fd5b505af11580156104aa573d6000803e3d6000fd5b50505050505050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610504576040517f3d83866f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6040517f8f28397000000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8281166004830152831690638f283970906024016101e2565b60408051600481526024810182526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167ff851a4400000000000000000000000000000000000000000000000000000000017905290516000918291829173ffffffffffffffffffffffffffffffffffffffff8616916105d991906107d4565b600060405180830381855afa9150503d8060008114610614576040519150601f19603f3d011682016040523d82523d6000602084013e610619565b606091505b509150915081610685576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600b60248201527f63616c6c206661696c6564000000000000000000000000000000000000000000604482015260640161038e565b808060200190518101906106999190610803565b949350505050565b73ffffffffffffffffffffffffffffffffffffffff811681146106c357600080fd5b50565b80357fffffffff00000000000000000000000000000000000000000000000000000000811681146106f657600080fd5b919050565b6000806040838503121561070e57600080fd5b8235610719816106a1565b9150610727602084016106c6565b90509250929050565b60008060006060848603121561074557600080fd5b8335610750816106a1565b92506020840135610760816106a1565b915061076e604085016106c6565b90509250925092565b6000806040838503121561078a57600080fd5b8235610795816106a1565b915060208301356107a5816106a1565b809150509250929050565b6000602082840312156107c257600080fd5b81356107cd816106a1565b9392505050565b6000825160005b818110156107f557602081860181015185830152016107db565b506000920191825250919050565b60006020828403121561081557600080fd5b81516107cd816106a156fea26469706673582212205ed162ca42e6a5790a80c36e3ffc5fa25a716d3da013994b82a77dfba73f4a1164736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100725760003560e01c80637eff275e116100505780637eff275e146100db5780638da5cb5b146100ee578063f3b7dead1461010e57600080fd5b80633fe0cd72146100775780635d6747cd1461008c5780635ea90176146100c8575b600080fd5b61008a6100853660046106fb565b610121565b005b61009f61009a3660046106fb565b610218565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b61008a6100d6366004610730565b6103b4565b61008a6100e9366004610777565b6104b3565b60005461009f9073ffffffffffffffffffffffffffffffffffffffff1681565b61009f61011c3660046107b0565b610558565b60005473ffffffffffffffffffffffffffffffffffffffff163314610172576040517f3d83866f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6040517fd6c680690000000000000000000000000000000000000000000000000000000081527fffffffff000000000000000000000000000000000000000000000000000000008216600482015273ffffffffffffffffffffffffffffffffffffffff83169063d6c68069906024015b600060405180830381600087803b1580156101fc57600080fd5b505af1158015610210573d6000803e3d6000fd5b505050505050565b6040517fffffffff00000000000000000000000000000000000000000000000000000000821660248201526000908190819073ffffffffffffffffffffffffffffffffffffffff861690604401604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529181526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167f0d74157700000000000000000000000000000000000000000000000000000000179052516102e691906107d4565b600060405180830381855afa9150503d8060008114610321576040519150601f19603f3d011682016040523d82523d6000602084013e610326565b606091505b509150915081610397576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600b60248201527f63616c6c206661696c656400000000000000000000000000000000000000000060448201526064015b60405180910390fd5b808060200190518101906103ab9190610803565b95945050505050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610405576040517f3d83866f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6040517f720850310000000000000000000000000000000000000000000000000000000081527fffffffff000000000000000000000000000000000000000000000000000000008216600482015273ffffffffffffffffffffffffffffffffffffffff8381166024830152841690637208503190604401600060405180830381600087803b15801561049657600080fd5b505af11580156104aa573d6000803e3d6000fd5b50505050505050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610504576040517f3d83866f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6040517f8f28397000000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8281166004830152831690638f283970906024016101e2565b60408051600481526024810182526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167ff851a4400000000000000000000000000000000000000000000000000000000017905290516000918291829173ffffffffffffffffffffffffffffffffffffffff8616916105d991906107d4565b600060405180830381855afa9150503d8060008114610614576040519150601f19603f3d011682016040523d82523d6000602084013e610619565b606091505b509150915081610685576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600b60248201527f63616c6c206661696c6564000000000000000000000000000000000000000000604482015260640161038e565b808060200190518101906106999190610803565b949350505050565b73ffffffffffffffffffffffffffffffffffffffff811681146106c357600080fd5b50565b80357fffffffff00000000000000000000000000000000000000000000000000000000811681146106f657600080fd5b919050565b6000806040838503121561070e57600080fd5b8235610719816106a1565b9150610727602084016106c6565b90509250929050565b60008060006060848603121561074557600080fd5b8335610750816106a1565b92506020840135610760816106a1565b915061076e604085016106c6565b90509250925092565b6000806040838503121561078a57600080fd5b8235610795816106a1565b915060208301356107a5816106a1565b809150509250929050565b6000602082840312156107c257600080fd5b81356107cd816106a1565b9392505050565b6000825160005b818110156107f557602081860181015185830152016107db565b506000920191825250919050565b60006020828403121561081557600080fd5b81516107cd816106a156fea26469706673582212205ed162ca42e6a5790a80c36e3ffc5fa25a716d3da013994b82a77dfba73f4a1164736f6c63430008140033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 285,
        "contract": "contracts/ProxyAdmin.sol:ProxyAdmin",
        "label": "owner",
        "offset": 0,
        "slot": "0",
        "type": "t_address"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      }
    }
  }
}